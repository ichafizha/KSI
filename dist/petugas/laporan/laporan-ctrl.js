function LaporanInputCtrl(a,t,e,i,n,r){function o(a){u.dataJenis=a.data.response}function d(a){u.dataLokasi=a.data.response}function l(a){var t=new FileReader;t.onload=function(a){var t=new Image;return t.onload=function(){width=t.width,height=t.height,width>height?width>MAX_SIZE&&(height*=MAX_SIZE/width,width=MAX_SIZE):height>MAX_SIZE&&(width*=MAX_SIZE/height,height=MAX_SIZE),h.canvas.width=width,h.canvas.height=height,h.drawImage(t,0,0,width,height)},t.src=a.target.result,images=t,t},t.readAsDataURL(a.target.files[0])}function s(e){function i(t){r.Sukses(),a.go("petugas.laporankejahatan-view")}var o={alamat:e.alamat,deskripsi:e.deskripsi,idJenisK:e.idJenisK,idLokasi:e.idLokasi,imgURL:e.imgURL,judul:e.judul,latitude:e.latitude,longitude:e.longitude,tanggalKejadian:e.tanggalKejadian,waktuKejadian:e.waktuKejadian},d=document.querySelector("canvas"),l=d.toDataURL("image/png");o.idRole=3,o.idJenisK=Number(o.idJenisK),o.idLokasi=Number(o.idLokasi),o.idStatus=1,o.idPetugas=1,o.latitude=Number(o.latitude),o.longitude=Number(o.longitude),o.imgURL=l,o.tanggalKejadian=n("date")(u.tanggalKejadian,"yyyy-MM-dd"),o.waktuKejadian=n("date")(u.waktuKejadian,"HH:mm:ss"),void 0===e||t.postDataLaporan(o).success(i).error(function(a,t){400===t&&r.Gagal()})}var u=this;e.getAllData().then(o),i.getAllData().then(d);MAX_SIZE=200;var u=this,g=document.getElementById("canvas"),h=g.getContext("2d"),c=document.getElementById("gambarKejahatan");c.addEventListener("change",l),u.tambah=s}function LaporanViewCtrl(a,t){function e(a){document.querySelector("loading").style.visibility="hidden",n.dataLokasi=a.data.response}function i(a){n.data=a.data.response}var n=this;n.getLokasi=t.getAllData().then(e),n.dataLaporan=a.getAllData().then(i)}function LaporanStatistikCtrl(a){}angular.module("CrimeZone").controller("LaporanInputCtrl",LaporanInputCtrl).controller("LaporanViewCtrl",LaporanViewCtrl).controller("LaporanStatistikCtrl",LaporanStatistikCtrl),LaporanInputCtrl.$inject=["$state","LaporanService","JenisService","LokasiService","$filter","ActionService"],LaporanViewCtrl.$inject=["LaporanService","LokasiService"],LaporanStatistikCtrl.$inject=["LaporanService"];